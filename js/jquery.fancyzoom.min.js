/*!
 * jQuery FancyZoom Plugin
 * version: 1.00 (18-AUG-2011)
 * @requires jQuery v1.6.2 or later
 *
 * Examples and documentation at: http://github.com/krug/jquery.fancyzoom/
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
;(function(d){d.extend(jQuery.easing,{easeInOutCubic:function(a,b,c,f,j){if((b/=j/2)<1)return f/2*b*b*b+c;return f/2*((b-=2)*b*b+2)+c}});d.fn.fancyZoom=function(w){var x=d.extend({minBorder:90},w);var t=new y(x);this.each(function(a){d(this).mouseover(t.preload);d(this).click(t.show)});function z(a){var b=0;var c=0;var f=50;var j=12;if(a.childNodes.length>0){a=a.childNodes[0]}if(a.width&&a.height){f=a.width;j=a.height}do{b+=a.offsetLeft;c+=a.offsetTop}while(a=a.offsetParent)return{left:b,top:c,width:f,height:j}};function A(){var a=window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth||0;var b=window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight||0;var c=window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft||0;var f=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop||0;return{width:a,height:b,scrollX:c,scrollY:f}};function y(k){var k=k;var l=false;var p=false;var m=new Image();var q=0;var r=0;var g,e;var n=d(document.createElement("div"));n.attr("id","zoom_spin");d("body").append(n);var h=d(document.createElement("div"));h.attr("id","zoom");d("body").append(h);var s=d(document.createElement("img"));s.attr("id","zoom_img");h.append(s);var i=d(document.createElement("div"));i.attr("id","zoom_close");h.append(i);this.preload=function(a){var b=this.getAttribute("href");if(m.src!=b){p=true;m=new Image();d(m).load(function(){p=false});m.src=b}};this.show=function(a){e=A();g=z(this);if(p){if(q==0){B(this)}}else{u(this)}a.preventDefault()};function C(a){if(p){n.css("backgroundPosition","0 "+r*50+"px");if(++r==12)r=0}else{clearInterval(q);q=0;n.hide();u(a)}};function B(a){n.css({left:(e.width/2)+"px",top:((e.height/2)+e.scrollY)+"px",backgroundPosition:"0 0",display:"block"});r=1;q=setInterval(function(){C(a)},100)};function u(a){if(l)return false;l=true;s.attr("src",a.getAttribute("href"));var b=m.width;var c=m.height;var f=b/c;if(b>e.width-k.minBorder){b=e.width-k.minBorder;c=b/f}if(c>e.height-k.minBorder){c=e.height-k.minBorder;b=c*f}var j=(e.height/2)-(c/2)+e.scrollY;var D=(e.width/2)-(b/2);i.hide();h.hide().css({left:g.left+"px",top:g.top+"px",width:g.width+"px",height:g.height+"px"});h.animate({left:D+'px',top:j+'px',width:b+"px",height:c+"px",opacity:"show"},200,"easeInOutCubic",function(){i.fadeIn();i.click(o);h.click(o);d(document).keyup(v);l=false})};function o(){if(l)return false;l=true;i.hide();h.animate({left:g.left+"px",top:g.top+"px",opacity:"hide",width:g.width+"px",height:g.height+"px"},200,"easeInOutCubic",function(){l=false});h.unbind('click',o);i.unbind('click',o);d(document).unbind('keyup',v)};function v(a){if(a.keyCode==27){o()}}}}})(jQuery);
